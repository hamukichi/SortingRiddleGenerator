===================================
SortingRiddleGenerator: ソートなぞなぞの出題
===================================

概要
====

英語や日本語などの単語を構成する文字を昇順に整列したものを与え，もとの単語を復元させる言葉遊びを，ソートなぞなぞと呼びます．
この Python 製 CUI ツールは，ソートなぞなぞを自動で出題し，答え合わせも行うものです．

機能
====

* ソートなぞなぞを自動的に出題する
* 答え合わせ，別解の提示，成績の集計も行う
* プリセット機能により，使用する単語リストを容易に切り替えられる

導入
====

あらかじめ，Python 3.x を導入してください．作者は Windows 10 上の Python 3.7.0 で動作確認をしました．
当リポジトリ内のファイル，ディレクトリを適当な場所に配置してください．
コンソールで ``python sortridgen.py --help`` を実行し，
コマンドライン引数の入力方法の説明が表示されれば，導入はできています．

使い方
======

基本的な使い方
-------------

``python sortridgen.py contest`` を実行すると，基本的な英単語を用いたソートなぞなぞの出題が始まります
（後述のように，プリセット機能を用いて，出題範囲の単語を設定できます）．
単語を構成する文字を昇順に整列したものが表示されるので，もとの単語を入力してください．
正答が入力されると，別解が表示されるとともに，次の問題に進みます．

解答の代わりに，次のコマンドを入力することもできます．

* ``HINT [文字数]``: 答えの単語の先頭から順に，指定された数の文字をヒントとして出力します．文字数は正の整数です．その後，再度解答かコマンドの入力を求められます．
* ``GIVEUP``: この問題を諦めて，次の問題に進みます．その際に，想定された正答と，別解が表示されます．
* ``EXIT``: 出題を終了します．成績の集計が表示され，プログラムが終了します．

コマンド ``EXIT`` が入力されない限り，エンドレスで出題が続きます．

出題する問題数を指定する
----------------------

``python sortridgen.py contest --num [問題数]`` を実行すると，指定した問題数だけ，連続して出題します．
なお，問題数が 0 以下の整数の場合，上記と同様にエンドレスでの出題が続きます．

辞書プリセットを切り替える
--------------------------

当プログラムが使用する単語リストとその組み合わせは，次の二種類のファイルで規定されます．

* ソートなぞなぞ用辞書：``dictionaries/`` 以下に格納される CSV ファイルです．元の単語を示す ``orig_word`` 列と，それを整列したものを示す ``sorted_word`` 列からなります．
* 辞書プリセット：``presets/`` 以下に格納される JSON ファイルです．次を規定します．

  * 主辞書：出題と別解の探索に使われるソートなぞなぞ用辞書です．
  * 副辞書：別解の探索のみに使われるソートなぞなぞ用辞書です．
  * 出題する単語の長さの上限と下限

``python sortridgen.py contest --preset [プリセット名]`` を実行すると，指定した名前の辞書プリセットを用いて，出題が始まります．
プリセット名は，辞書プリセットのファイル名 ``*.json`` です．
使用できるプリセットの例は後述の通りです．

たとえば，``python sortridgen.py contest --preset ejdic-hand-level1.json`` を実行すると，
やや難しめの英単語を出題範囲とすることができます．

使用できるソートなぞなぞ用辞書と辞書プリセットの例
==========================

当プログラムで使用できるソートなぞなぞ用辞書と辞書プリセットの例は以下の通りです．

同梱しているもの
------------------------

配布物の中には，以下の辞書プリセットと，それが要求するソートなぞなぞ用辞書が含まれます．

ejdic-hand 系プリセット
^^^^^^^^^^^^^^^^^^^^^^

パブリックドメインの英和辞典 `ejdic-hand <https://kujirahand.com/web-tools/EJDictFreeDL.php>`_ から，
英単語とそれを整列したものを抜き出して作ったソートなぞなぞ用辞書です．
このソートなぞなぞ用辞書は ``dictionaries/english/`` 内にあり，単語の利用頻度の高いものから，
``ejdic-hand_level2.csv``（650 語），``ejdic-hand_level1.csv``（1434 語），``ejdic-hand_level0.csv`` （32944 語）となっています．
これらのソートなぞなぞ用辞書を用いたプリセットは以下の通りです．

* ``ejdic-hand-level2.json``: 既定のプリセット ``default.json`` と，同一の辞書たちを用います．``ejdic-hand-level2`` を主辞書に，残りの二つを副辞書に用います．
* ``ejdic-hand-level1.json``: ``ejdic-hand-level1`` を主辞書に，残りの二つを副辞書に用います．
* ``ejdic-hand-level0.json``: ``ejdic-hand-level0`` を主辞書に，残りの二つを副辞書に用います．

自作する
-------

上記のファイルに倣って，ソートなぞなぞ用辞書（CSV ファイル）と辞書プリセット（JSON ファイル）を自作することもできます．
詳細な説明は現在作成中です．

ライセンス
=========

当プログラムには MIT ライセンスを適用します．詳細については LICENSE ファイルを参照してください．

更新履歴
=======

* Version 0.1.0 (2019-08-03): 出す問題数を指定する機能を追加．全面的リファクタリング．

* Version 0.0.1 (2019-07-29): 初版．
